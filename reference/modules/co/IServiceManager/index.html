<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta content="width=device-width, initial-scale=1.0" name=viewport><title>co.IServiceManager | Coral · Reference · Modules · Coral (co)</title><link href="../../../../assets/stylesheets/style.css" media=screen rel=stylesheet /></meta></meta></head><body class="reference reference_modules reference_modules_co reference_modules_co_IServiceManager reference_modules_co_IServiceManager_index"><header class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button class=navbar-toggle data-target=".navbar-collapse" data-toggle=collapse type=button><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button><a class=brand href="/"><img class=brand src="../../../../assets/images/coral-logo.svg"/></a></div><nav class="collapse navbar-collapse" role=navigation><ul class="nav navbar-nav"><li><a href="/guides/getting-started"><i class=icon-enter></i> Get Started</a></li><li><a href="/guides"><i class=icon-book></i> Guides</a></li><li class=active><a href="/reference"><i class=icon-gears></i> Reference</a></li><li><a href="/community"><i class=icon-users></i> Community</a></li></ul><div class=navbar-right id=search-widget><i class=icon-search></i><input class="form-control searchbox" placeholder="Search the API and Pages — press 's'"/></div></nav></div></header><div class=container><div class=row><div class="col-md-3 hidden-print" role=complementary><div class=sidebar><div class=api id=toc><ul class="nav level-1"><li><a href="#_top">co.IServiceManager</a></li><ul class="nav level-2"><li><a href="#_hierarchy"><i class=icon-hierarchy></i> Hierarchy</a></li><li><a href="#_fields"><i class=icon-field></i> Fields</a><ul class="nav level-3"><li><a class=mono href="#isLazy">isLazy</a></li></ul></li><li><a href="#_methods"><i class=icon-method></i> Methods</a><ul class="nav level-3"><li><a class=mono href="#addService">addService</a></li><li><a class=mono href="#addServiceForType">addServiceForType</a></li><li><a class=mono href="#addServiceProvider">addServiceProvider</a></li><li><a class=mono href="#addServiceProviderForType">addServiceProviderForType</a></li><li><a class=mono href="#getService">getService</a></li><li><a class=mono href="#getServiceForInstance">getServiceForInstance</a></li><li><a class=mono href="#getServiceForType">getServiceForType</a></li><li><a class=mono href="#removeService">removeService</a></li><li><a class=mono href="#removeServiceForType">removeServiceForType</a></li></ul></li></ul></ul></div></div></div><div class=col-md-9 role=main><a id=_top></a><ol class=breadcrumb><li><a href="/"> Coral</a></li><li><a href="/reference">Reference</a></li><li><a href="/reference/modules">Modules</a></li><li><a href="/reference/modules/co">Coral Module</a></li><li class=active>co.IServiceManager</li></ol><div class=page-header><h1>co.IServiceManager<small>interface</small></h1></div><div class=doc><p class=lead>A central database where services are <em>published</em> and <em>queried</em>.</p> <div class=hl><p>Services are always queried by type—an instance of <a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>—so for example, you can find a car by looking for a service of type <code>ICar</code>, a boat by looking for <code>IBoat</code>, or either by looking for <code>IVehicle</code>.</p> <p>The database supports three types of queries:</p> <ol> <li> <dl> <dt>Global Query <em>(S)</em></dt> <dd>Returns the service of type <code>S</code> published for global use—the Coral analogue of a <em>singleton</em>. For example, queries with <code>S</code>=<code>ICar</code> would always return the same general-purpose car instance. See <a href="#addService" class=nf>addService</a> and <a href="#getService" class=nf>getService</a>.</dd> </dl> </li> <li> <dl> <dt>Type-specialized Query <em>(S, T)</em></dt> <dd>Returns a service of type <code>S</code> specialized for the type <code>T</code>. For example, you may query a vehicle <em>specialized by medium</em> so that with <code>S</code>=<code>IVehicle</code>, <code>T</code>=<code>IWater</code> you’d get a boat, and with <code>S</code>=<code>IVehicle</code>, <code>T</code>=<code>IRoad</code> you’d get a car. When an exact result is not available, the query goes for the next best result by querying the ancestors of <code>T</code>, until it finally falls back to a global query. See <a href="#addServiceForType" class=nf>addServiceForType</a> and <a href="#getServiceForType" class=nf>getServiceForType</a>.</dd> </dl> </li> <li> <dl> <dt>Instance-specialized Query <em>(S, I)</em></dt> <dd>Returns a service of type <code>S</code> specialized for an instance <code>I</code>. First we check if <code>I</code>’s <a href="/reference/modules/co/IObject" class=nc>co.IObject</a> also provides a service of type <code>S</code>—if so, it is returned; otherwise, we fall back to query 2 with <code>T</code>=<code>I.interface</code>. Building on the previous example, although a car is suitable for most roads, on a few rough ones you may want to switch to an off-road vehicle. That is, you want the query to return a specialized vehicle for a certain road <code>I</code>. In order to achieve this, you add a port of type <code>S</code> (providing the vehicle) to <code>I</code>’s object. See <a href="#getServiceForInstance" class=nf>getServiceForInstance</a>.</dd> </dl> </li> </ol> <p>Notice that query 3 falls back to query 2, and query 2 falls back to query 1. As a result, once you publish a global service of type <code>S</code>, all specialized queries for <code>S</code> are guaranteed to succeed.</p> <p><strong>Database keys are unique</strong>—publishing a service will replace any previous record with the same key.</p> <p><strong>Lazy instantiation</strong>—instead of adding a service, you may specify the <em>name of a component</em> that provides the service, and it won’t be created until the service is first queried. See <a href="#addServiceProvider" class=nf>addServiceProvider</a> and <a href="#addServiceProviderForType" class=nf>addServiceProviderForType</a>.</p> <p>Get this service from <a href="/reference/modules/co/ISystem" class=nc>co.ISystem</a>’s <a href="/reference/modules/co/ISystem#services" class=nv>services</a>.</p> </div></div><ul class=meta><li><i class="fa fa-fw fa-tags"></i><strong>Tags:</strong><ul class=tag-list><li><a href="/reference/modules/co#component-model">Component Model</a></li></ul></li><li><i class="fa fa-fw fa-link"></i><strong>Referenced from 1 type</strong>: <a href="/reference/modules/co/ISystem" class=nc>co.ISystem</a>.</li></ul><h2 id=_hierarchy><i class=icon-hierarchy></i> Hierarchy</h2><div class=hierarchy><ul><li><span><a href="/reference/modules/co/IService" class=nc>co.IService</a></span>Base of all interfaces. Represents a service provided by an object. <ul><li><span><strong>co.IServiceManager</strong></span>A central database where services are published and queried. </li></ul></li></ul></div><h2 id=_fields><i class=icon-field></i> Fields</h2><div class=member-list><div class="member hl collapsible" id=isLazy><div class=proto data-target="#isLazy_rest" data-toggle=collapse><span class=k>bool</span> <span class="heading nv">isLazy</span> </div><div class=doc><p class=lead>Whether lazy instantiation is enabled. Default is true.</p> <div class="collapse in" id=isLazy_rest><p>If false, components will be instantiated when added, instead of when queried.</p> </div></div></div></div><h2 id=_methods><i class=icon-method></i> Methods</h2><div class=member-list><div class="member hl collapsible" id=addService><div class=proto data-target="#addService_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">addService</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IService" class=nc>co.IService</a>&nbsp;<span class=nl>global</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Publishes a <code>global</code> provider of <code>serviceType</code>.</p> <div class="collapse in" id=addService_rest><ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if any argument is null.</li> <li><a href="/reference/modules/co/IllegalCastException" class=nc>co.IllegalCastException</a> if <code>service</code> is not of <code>serviceType</code>.</li> </ul> </div></div></div><div class="member hl collapsible" id=addServiceForType><div class=proto data-target="#addServiceForType_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">addServiceForType</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>type</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IService" class=nc>co.IService</a>&nbsp;<span class=nl>specialized</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Publishes a <code>specialized</code> provider of <code>serviceType</code> for <code>type</code>.</p> <div class="collapse in" id=addServiceForType_rest><ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if any argument is null.</li> <li><a href="/reference/modules/co/IllegalCastException" class=nc>co.IllegalCastException</a> if <code>service</code> is not of <code>serviceType</code>.</li> </ul> </div></div></div><div class="member hl collapsible" id=addServiceProvider><div class=proto data-target="#addServiceProvider_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">addServiceProvider</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<span class=k>string</span>&nbsp;<span class=nl>componentName</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Publishes a global provider of <code>serviceType</code> (with lazy instantiation).</p> <div class="collapse in" id=addServiceProvider_rest><p>The service is obtained from a new instance of <code>componentName</code>, by scanning the object for a service of type <code>serviceType</code>. If an error occurs, we drop the service and raise <a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a>.</p> <ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if any argument is invalid.</li> <li><a href="/reference/modules/co/NoSuchPortException" class=nc>co.NoSuchPortException</a> if the component does not provide <code>serviceType</code>.</li> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if <a href="#isLazy" class=nv>isLazy</a> is false and we cannot obtain the service.</li> </ul> </div></div></div><div class="member hl collapsible" id=addServiceProviderForType><div class=proto data-target="#addServiceProviderForType_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">addServiceProviderForType</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>type</span>, <span class=k>in</span>&nbsp;<span class=k>string</span>&nbsp;<span class=nl>componentName</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Publishes a specialized provider of <code>serviceType</code> for <code>type</code> (with lazy instantiation).</p> <div class="collapse in" id=addServiceProviderForType_rest><p>The service is obtained from a new instance of <code>componentName</code>, by scanning the object for a service of type <code>serviceType</code>. If an error occurs, we drop the service and raise <a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a>.</p> <ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if any argument is invalid.</li> <li><a href="/reference/modules/co/NoSuchPortException" class=nc>co.NoSuchPortException</a> if the component does not provide <code>serviceType</code>.</li> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if <a href="#isLazy" class=nv>isLazy</a> is false and we cannot obtain the service.</li> </ul> </div></div></div><div class="member hl collapsible" id=getService><div class=proto data-target="#getService_rest" data-toggle=collapse><p><a href="/reference/modules/co/IService" class=nc>co.IService</a> <span class="heading nf">getService</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Returns the global service of type <code>serviceType</code>.</p> <div class="collapse in" id=getService_rest><ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if <code>serviceType</code> is null.</li> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if no result is found.</li> </ul> </div></div></div><div class="member hl collapsible" id=getServiceForInstance><div class=proto data-target="#getServiceForInstance_rest" data-toggle=collapse><p><a href="/reference/modules/co/IService" class=nc>co.IService</a> <span class="heading nf">getServiceForInstance</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IService" class=nc>co.IService</a>&nbsp;<span class=nl>instance</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Returns a service of type <code>serviceType</code> specialized for <code>instance</code>.</p> <div class="collapse in" id=getServiceForInstance_rest><ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if any argument is null.</li> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if no result is found.</li> </ul> </div></div></div><div class="member hl collapsible" id=getServiceForType><div class=proto data-target="#getServiceForType_rest" data-toggle=collapse><p><a href="/reference/modules/co/IService" class=nc>co.IService</a> <span class="heading nf">getServiceForType</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>clientType</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Returns a service of type <code>serviceType</code> specialized for <code>type</code>.</p> <div class="collapse in" id=getServiceForType_rest><ul class=raises> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if any argument is null.</li> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if no result is found.</li> </ul> </div></div></div><div class="member hl collapsible" id=removeService><div class=proto data-target="#removeService_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">removeService</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Removes the service of type <code>serviceType</code> published for global use.</p> <div class="collapse in" id=removeService_rest><ul class=raises> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if no such service is found.</li> </ul> </div></div></div><div class="member hl collapsible" id=removeServiceForType><div class=proto data-target="#removeServiceForType_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">removeServiceForType</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>serviceType</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>&nbsp;<span class=nl>clientType</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Removes the service of type <code>serviceType</code> published for <code>type</code>.</p> <div class="collapse in" id=removeServiceForType_rest><ul class=raises> <li><a href="/reference/modules/co/MissingServiceException" class=nc>co.MissingServiceException</a> if no such service is found.</li> </ul> </div></div></div></div></div></div></div><footer class=footer><div class=container><p>Code licensed under the<a href="https://raw.github.com/coral-framework/coral/master/LICENSE" target=_blank> MIT License</a>. Documentation licensed under<a href="//creativecommons.org/licenses/by-sa/4.0/" target=_blank> CC BY-SA</a>.</p><ul class=list-inline><li>Currently v0.8.0</li><li>·</li><li><a href="/about"> About</a></li><li>·</li><li><a href="https://github.com/coral-framework/coral"> GitHub</a></li><li>·</li><li><a href="https://github.com/coral-framework/coral/issues"> Issues</a></li><li>·</li><li><a href="https://github.com/coral-framework/coral/releases"> Releases</a></li></ul></div></footer><script src="//code.jquery.com/jquery-2.1.0.min.js"></script><script src="../../../../assets/javascripts/script.js"></script></body></html>