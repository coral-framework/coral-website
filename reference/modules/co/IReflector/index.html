<!DOCTYPE html><html lang=en><head><meta charset=utf-8><meta content="width=device-width, initial-scale=1.0" name=viewport><title>co.IReflector | Coral · Reference · Modules · Coral (co)</title><link href="../../../../assets/stylesheets/style.css" media=screen rel=stylesheet /></meta></meta></head><body class="reference reference_modules reference_modules_co reference_modules_co_IReflector reference_modules_co_IReflector_index"><header class="navbar navbar-default navbar-fixed-top" role=navigation><div class=container><div class=navbar-header><button class=navbar-toggle data-target=".navbar-collapse" data-toggle=collapse type=button><span class=icon-bar></span><span class=icon-bar></span><span class=icon-bar></span></button><a class=brand href="/"><img class=brand src="../../../../assets/images/coral-logo.svg"/></a></div><nav class="collapse navbar-collapse" role=navigation><ul class="nav navbar-nav"><li><a href="/guides/getting-started"><i class=icon-enter></i> Get Started</a></li><li><a href="/guides"><i class=icon-book></i> Guides</a></li><li class=active><a href="/reference"><i class=icon-gears></i> Reference</a></li><li><a href="/community"><i class=icon-users></i> Community</a></li></ul><div class=navbar-right id=search-widget><i class=icon-search></i><input class="form-control searchbox" placeholder="Search the API and Pages — press 's'"/></div></nav></div></header><div class=container><div class=row><div class="col-md-3 hidden-print" role=complementary><div class=sidebar><div class=api id=toc><ul class="nav level-1"><li><a href="#_top">co.IReflector</a></li><ul class="nav level-2"><li><a href="#_hierarchy"><i class=icon-hierarchy></i> Hierarchy</a></li><li><a href="#_fields"><i class=icon-field></i> Fields</a><ul class="nav level-3"><li><a class=mono href="#size">size</a></li><li><a class=mono href="#type">type</a></li></ul></li><li><a href="#_methods"><i class=icon-method></i> Methods</a><ul class="nav level-3"><li><a class=mono href="#getField">getField</a></li><li><a class=mono href="#invoke">invoke</a></li><li><a class=mono href="#newDynamicProxy">newDynamicProxy</a></li><li><a class=mono href="#newInstance">newInstance</a></li><li><a class=mono href="#raise">raise</a></li><li><a class=mono href="#setField">setField</a></li></ul></li><li><a href="#_cpp"><i class=icon-code></i> Embedded C++</a></li></ul></ul></div></div></div><div class=col-md-9 role=main><a id=_top></a><ol class=breadcrumb><li><a href="/"> Coral</a></li><li><a href="/reference">Reference</a></li><li><a href="/reference/modules">Modules</a></li><li><a href="/reference/modules/co">Coral Module</a></li><li class=active>co.IReflector</li></ol><div class=page-header><h1>co.IReflector<small>interface</small></h1></div><div class=doc><p class=lead>Handles reflection operations for a Coral type.</p> <div class=hl><p>Coral handles reflection operations for a <a href="#type" class=nv>type</a> through a <em>reflector</em>. Reflectors are automatically generated by the Coral compiler, so you don’t have to write one unless you’re working on something magic.</p> <p>All reflectors share this uniform interface, but only a subset of the methods are expected to be supported for a certain <a href="#type" class=nv>type</a> (depending on its kind). Please take notice of each method’s exception specifications.</p> <p>Methods that receive values of type <code>any</code>—namely <a href="#getField" class=nf>getField</a>, <a href="#setField" class=nf>setField</a> and <a href="#invoke" class=nf>invoke</a>—can often handle type conversions. For example, <a href="#setField" class=nf>setField</a> can receive a <code>double</code> and store it into a <code>string</code> field. The conversions are handled transparently by the <code>any</code> type—check its documentation for a list of supported conversions.</p> <p>Note that some lower-level methods are only available from C++.</p> </div></div><ul class=meta><li><i class="fa fa-fw fa-tags"></i><strong>Tags:</strong><ul class=tag-list><li><a href="/reference/modules/co#type-system">Type System</a></li></ul></li><li><i class="fa fa-fw fa-link"></i><strong>Referenced from 2 types</strong>: <a href="/reference/modules/co/IType" class=nc>co.IType</a>, <a href="/reference/modules/lua/Component" class=nc>lua.Component</a>.</li></ul><h2 id=_hierarchy><i class=icon-hierarchy></i> Hierarchy</h2><div class=hierarchy><ul><li><span><a href="/reference/modules/co/IService" class=nc>co.IService</a></span>Base of all interfaces. Represents a service provided by an object. <ul><li><span><strong>co.IReflector</strong></span>Handles reflection operations for a Coral type. </li></ul></li></ul></div><h2 id=_fields><i class=icon-field></i> Fields</h2><div class=member-list><div class="member hl" id=size><div class=proto><span class=k>readonly</span> <span class=k>uint32</span> <span class="heading nv">size</span> </div><div class=doc><p class=lead>Number of bytes occupied by instances of this type.</p> </div></div><div class="member hl" id=type><div class=proto><span class=k>readonly</span> <a href="/reference/modules/co/IType" class=nc>co.IType</a> <span class="heading nv">type</span> </div><div class=doc><p class=lead>The type we are providing reflection for.</p> </div></div></div><h2 id=_methods><i class=icon-method></i> Methods</h2><div class=member-list><div class="member hl collapsible" id=getField><div class=proto data-target="#getField_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">getField</span><span class=paren>(</span><span class=k>in</span>&nbsp;<span class=k>any</span>&nbsp;<span class=nl>instance</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IField" class=nc>co.IField</a>&nbsp;<span class=nl>field</span>, <span class=k>in</span>&nbsp;<span class=k>any</span>&nbsp;<span class=nl>var</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Gets the value of a <code>field</code> in <code>instance</code> and puts it into <code>var</code>.</p> <div class="collapse in" id=getField_rest><ul class=raises> <li><a href="/reference/modules/co/NotSupportedException" class=nc>co.NotSupportedException</a> if <a href="#type" class=nv>type</a> is not a <a href="/reference/modules/co/IRecordType" class=nc>co.IRecordType</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if <code>instance</code> is not of <a href="#type" class=nv>type</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if the <code>field</code> is not from <a href="#type" class=nv>type</a>.</li> <li><a href="/reference/modules/co/IllegalStateException" class=nc>co.IllegalStateException</a> if <code>var</code> is not an output variable.</li> <li><a href="/reference/modules/co/IllegalCastException" class=nc>co.IllegalCastException</a> if <code>var</code> cannot store the field value.</li> </ul> </div></div></div><div class="member hl collapsible" id=invoke><div class=proto data-target="#invoke_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">invoke</span><span class=paren>(</span><span class=k>in</span>&nbsp;<span class=k>any</span>&nbsp;<span class=nl>instance</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IMethod" class=nc>co.IMethod</a>&nbsp;<span class=nl>method</span>, <span class=k>in</span>&nbsp;<span class=k>any</span><span class=o>[]</span>&nbsp;<span class=nl>args</span>, <span class=k>in</span>&nbsp;<span class=k>any</span>&nbsp;<span class=nl>retVal</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Invokes a <code>method</code> from <code>instance</code>.</p> <div class="collapse in" id=invoke_rest><p>Arguments are passed in <code>args</code> in direct order. Output parameters must be honored (by passing <em>out</em> variables). Excess arguments are currently ignored.</p> <p>If the callee raises an exception, it will propagate unchanged; otherwise, whatever is returned is put into <code>retVal</code>.</p> <ul class=raises> <li><a href="/reference/modules/co/NotSupportedException" class=nc>co.NotSupportedException</a> if <a href="#type" class=nv>type</a> is not a <a href="/reference/modules/co/IClassType" class=nc>co.IClassType</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if <code>instance</code> is not of <a href="#type" class=nv>type</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if the <code>method</code> is not from <a href="#type" class=nv>type</a>.</li> <li><a href="/reference/modules/co/MissingInputException" class=nc>co.MissingInputException</a> if <code>args</code> contains fewer arguments than the method expects.</li> <li><a href="/reference/modules/co/IllegalStateException" class=nc>co.IllegalStateException</a> if an argument should be an <em>out</em> variable but isn’t.</li> <li><a href="/reference/modules/co/IllegalCastException" class=nc>co.IllegalCastException</a> if an argument cannot be converted to the parameter type.</li> </ul> </div></div></div><div class="member hl collapsible" id=newDynamicProxy><div class=proto data-target="#newDynamicProxy_rest" data-toggle=collapse><p><a href="/reference/modules/co/IService" class=nc>co.IService</a> <span class="heading nf">newDynamicProxy</span><span class=paren>(</span><span class=k>in</span>&nbsp;<a href="/reference/modules/co/IDynamicServiceProvider" class=nc>co.IDynamicServiceProvider</a>&nbsp;<span class=nl>provider</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Creates a <em>dynamic proxy</em> (of this <a href="#type" class=nv>type</a>) to the specified <code>provider</code>.</p> <div class="collapse in" id=newDynamicProxy_rest><p>A <em>dynamic proxy</em> is a service that uses reflection to delegate all calls to a <a href="/reference/modules/co/IDynamicServiceProvider" class=nc>co.IDynamicServiceProvider</a>. The proxy will always call <a href="/reference/modules/co/IDynamicServiceProvider#dynamicRegisterService" class=nf>dynamicRegisterService</a> on the <code>provider</code> from within its constructor.</p> <ul class=raises> <li><a href="/reference/modules/co/NotSupportedException" class=nc>co.NotSupportedException</a> if <a href="#type" class=nv>type</a> is not a <a href="/reference/modules/co/IInterface" class=nc>co.IInterface</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if <code>provider</code> is invalid (null).</li> </ul> </div></div></div><div class="member hl collapsible" id=newInstance><div class=proto data-target="#newInstance_rest" data-toggle=collapse><p><a href="/reference/modules/co/IObject" class=nc>co.IObject</a> <span class="heading nf">newInstance</span><span class=paren>(</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Instantiates a component.</p> <div class="collapse in" id=newInstance_rest><ul class=raises> <li><a href="/reference/modules/co/NotSupportedException" class=nc>co.NotSupportedException</a> if <a href="#type" class=nv>type</a> is not a <a href="/reference/modules/co/IComponent" class=nc>co.IComponent</a>.</li> </ul> </div></div></div><div class="member hl collapsible" id=raise><div class=proto data-target="#raise_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">raise</span><span class=paren>(</span><span class=k>in</span>&nbsp;<span class=k>string</span>&nbsp;<span class=nl>message</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Raises an exception (of this <a href="#type" class=nv>type</a>) with the given <code>message</code>.</p> <div class="collapse in" id=raise_rest><ul class=raises> <li><a href="/reference/modules/co/NotSupportedException" class=nc>co.NotSupportedException</a> if <a href="#type" class=nv>type</a> is not an exception.</li> </ul> </div></div></div><div class="member hl collapsible" id=setField><div class=proto data-target="#setField_rest" data-toggle=collapse><p><span class=k>void</span> <span class="heading nf">setField</span><span class=paren>(</span><span class=k>in</span>&nbsp;<span class=k>any</span>&nbsp;<span class=nl>instance</span>, <span class=k>in</span>&nbsp;<a href="/reference/modules/co/IField" class=nc>co.IField</a>&nbsp;<span class=nl>field</span>, <span class=k>in</span>&nbsp;<span class=k>any</span>&nbsp;<span class=nl>value</span><span class=paren>)</span></p></div><div class=doc><p class=lead>Sets the value of a <code>field</code> in <code>instance</code> to <code>value</code>.</p> <div class="collapse in" id=setField_rest><ul class=raises> <li><a href="/reference/modules/co/NotSupportedException" class=nc>co.NotSupportedException</a> if <a href="#type" class=nv>type</a> is not a <a href="/reference/modules/co/IRecordType" class=nc>co.IRecordType</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if <code>instance</code> is not of <a href="#type" class=nv>type</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if the <code>field</code> is not from <a href="#type" class=nv>type</a>.</li> <li><a href="/reference/modules/co/IllegalArgumentException" class=nc>co.IllegalArgumentException</a> if the <code>field</code> is <em>read-only</em>.</li> <li><a href="/reference/modules/co/IllegalCastException" class=nc>co.IllegalCastException</a> if the field cannot store the <code>value</code>.</li> </ul> </div></div></div></div><h2 id=_cpp><i class=icon-code></i> Embedded C++</h2><div class="hl code"><pre class=cpp>
<span class="cm">/*</span>
<span class="cm">    Constructs an array of values in memory starting at `ptr`.</span>
<span class="cm">    The memory area should be at least `numValues * size` bytes long.</span>
<span class="cm">    Raises co.NotSupportedException if #type cannot be cast to a value.</span>
<span class="cm"> */</span>
<span class="k">virtual</span> <span class="kt">void</span> <span class="n">createValues</span><span class="p">(</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">numValues</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">    Copies the array of values at `fromPtr` to `toPtr`.</span>
<span class="cm">    Both arrays must contain `numValues` properly constructed values.</span>
<span class="cm">    Each copy is done using the value&#39;s assignment operator.</span>
<span class="cm">    Raises co.NotSupportedException if #type cannot be cast to a value.</span>
<span class="cm"> */</span>
<span class="k">virtual</span> <span class="kt">void</span> <span class="n">copyValues</span><span class="p">(</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">fromPtr</span><span class="p">,</span> <span class="kt">void</span><span class="o">*</span> <span class="n">toPtr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">numValues</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">    Destructs an array of `numValues` values starting at `ptr`.</span>
<span class="cm">    All values must have been constructed with createValues().</span>
<span class="cm">    Raises co.NotSupportedException if #type cannot be cast to a value.</span>
<span class="cm"> */</span>
<span class="k">virtual</span> <span class="kt">void</span> <span class="n">destroyValues</span><span class="p">(</span> <span class="kt">void</span><span class="o">*</span> <span class="n">ptr</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">numValues</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

<span class="cm">/*</span>
<span class="cm">    Returns true if and only if a0 == b0, a1 == b1, ... aN == bN.</span>
<span class="cm">    Raises co.NotSupportedException if #type cannot be cast to a value.</span>
<span class="cm"> */</span>
<span class="k">virtual</span> <span class="kt">bool</span> <span class="n">compareValues</span><span class="p">(</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="k">const</span> <span class="kt">void</span><span class="o">*</span> <span class="n">b</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">numValues</span> <span class="p">)</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span></pre></div></div></div></div><footer class=footer><div class=container><p>Code licensed under the<a href="https://raw.github.com/coral-framework/coral/master/LICENSE" target=_blank> MIT License</a>. Documentation licensed under<a href="//creativecommons.org/licenses/by-sa/4.0/" target=_blank> CC BY-SA</a>.</p><ul class=list-inline><li>Currently v0.8.0</li><li>·</li><li><a href="/about"> About</a></li><li>·</li><li><a href="https://github.com/coral-framework/coral"> GitHub</a></li><li>·</li><li><a href="https://github.com/coral-framework/coral/issues"> Issues</a></li><li>·</li><li><a href="https://github.com/coral-framework/coral/releases"> Releases</a></li></ul></div></footer><script src="//code.jquery.com/jquery-2.1.0.min.js"></script><script src="../../../../assets/javascripts/script.js"></script></body></html>